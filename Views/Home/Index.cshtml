@model List<IrigasiManganti.Models.Sumur>;

@{
    Layout = "~/Views/Shared/_LayoutNavbarNew.cshtml";
    ViewData["Title"] = "Selamat Datang";
}

@section styles {
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700&display=swap">
    <link href="~/lib/leaflet/leaflet.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.EasyButton/2.4.0/easy-button.css"
        integrity="sha512-aiVWmB2G8oV+XfHo1CR6hEAxzCl48Lrl3UBzQ6P+BEMkT8qY1tGecdQx6x/X8i9cCVrwQU9ipsOsZlNkRh9n7w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="~/lib/flatpickr/flatpickr.min.css" rel="stylesheet" type="text/css" />

    <style>
        * {
            font-family: 'Manrope', sans-serif;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden; /* Pastikan tidak ada scroll */
        }

        .container-map {
            position: absolute;
            top: 70px;
            left: 0;
            height: 100vh;
            width: 100vw;
            padding: 0;
            margin: 0;
        }

        #map {
            height: 90%;
            width: 100%;
            top: 0;
            left: 0;
            background: white;
            z-index: 1;
        }

        .overlay-list {
            position: absolute;
            top: 20px;
            left: 10px;
            width: 300px;
            height: 450px;
            background-color: rgba(255, 255, 255, 0.7); /* Transparan */
            padding: 15px;
            border-radius: 10px;
            z-index: 1000;
            max-height: 90%;
            overflow: auto;
        }

        .blueimp-gallery {
            z-index: 1050;
        }

        .gm-style-mtc {
        bottom: 86px !important; /* Atur jarak dari bawah, sesuaikan dengan kebutuhan */
        right: 77px !important;    /* Sesuaikan jarak dari kiri */
        }
    </style>
}

<div class="container-map">
    <!-- Overlay list and map -->
    <div class="overlay-list">
        <div class="card-header p-0">
            <ul class="nav nav-tabs navtab-bg nav-fill" id="tab-center-left">
                <li class="nav-item">
                    <a href="#tab-awlr" data-bs-toggle="tab" aria-expanded="true" class="nav-link">
                        List Data <span class="badge bg-blue rounded ms-1" data-plugin="counterup"
                            id="total-awlr">0</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#tab-cctv" data-bs-toggle="tab" aria-expanded="true" class="nav-link">
                        CCTV
                    </a>
                </li>
            </ul>
        </div>

        <div class="card-body p-2 side-bar-home">
            <div class="tab-content p-0">
                <div class="tab-pane" id="tab-awlr">
                    @foreach (var item in Model)
                    {
                        <div class="card-body">
                            <div class="reading-device d-flex align-items-center justify-content-between mb-2">
                                <div>
                                    KODE SUMUR
                                    <span class="badge badge-outline-secondary rounded-1 ms-1"
                                        style="color: #A9ABB8;border-color: #A9ABB8;">@item.Code</span>
                                </div>
                            </div>
                            <div class="d-flex justify-content-around align-items-center reading-text">
                                <div class="col-4 text-center">
                                    @if(item.KedalamanBor == null)
                                    {
                                        <h4 class="text-status-">-</h4>
                                    }
                                    else
                                    {
                                        <h4 class="text-status-">@item.KedalamanBor<sup>m</sup></h4>
                                    }
                                </div>
                                <div class="col-4 text-center">
                                    @if(item.DebitSumur == null)
                                    {
                                        <h4 class="text-status-">-</h4>
                                    }
                                    else
                                    {
                                        <h4 class="text-status-">@item.DebitSumur</h4>
                                    }
                                </div>
                                <div class="col-4 text-center">
                                    @if(item.Status == "TIDAK OPERASI")
                                    {
                                        <h4><span class="rounded-1 ms-1 align-self-center text-danger">@item.Status</span></h4>
                                    }
                                    else
                                    {
                                        <h4><span class="rounded-1 ms-1 align-self-center text-success">@item.Status</span></h4>
                                    }
                                </div>
                            </div>
                            <div class="d-flex justify-content-around reading-text">
                                <div class="col-4 text-center">Kedalaman</div>
                                <div class="col-4 text-center">Debit Sumur (Lt/det)</div>
                                <div class="col-4 text-center">Status</div>
                            </div>
                        </div>
                    }
                </div>
                <div class="tab-pane" id="tab-cctv">
                    <div id="links" class="links"></div>
                    <div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls"
                        aria-label="image gallery" aria-modal="true" role="dialog">
                        <div class="slides" aria-live="polite"></div>
                        <h3 class="title"></h3>
                        <a class="prev" aria-controls="blueimp-gallery" aria-label="previous slide"
                            aria-keyshortcuts="ArrowLeft"></a>
                        <a class="next" aria-controls="blueimp-gallery" aria-label="next slide"
                            aria-keyshortcuts="ArrowRight"></a>
                        <a class="close" aria-controls="blueimp-gallery" aria-label="close"
                            aria-keyshortcuts="Escape"></a>
                        <a class="play-pause" aria-controls="blueimp-gallery" aria-label="play slideshow"
                            aria-keyshortcuts="Space" aria-pressed="false" role="button"></a>
                        <ol class="indicator"></ol>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Map div -->
    <div id="map"></div>
</div>



@section scripts {
    <script src="~/lib/leaflet/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.EasyButton/2.4.0/easy-button.min.js"
        integrity="sha512-Tndo4y/YJooD/mGXS9D6F1YyBcSyrWnnSWQ5Z9IcKt6bljicjyka9qcP99qMFbQ5+omfOtwwIapv1DjBCZcTJQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/5.0.8/signalr.min.js"></script>
    <script src="~/lib/flatpickr/flatpickr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/id.js"></script>
    @* Google Maps *@
   <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD4jqcen5Xqrgck4V73aL6VepyKp2_wK1U&callback=initMap"></script>

}

@section additionalScripts {
    <script>
        function showRandomNumber(){
                document.getElementById("myNumber").innerHTML = rando(5, 10);
            }

            // Tambahkan marker, data, atau layer lain ke peta sesuai kebutuhan
        }

        @* google.maps.event.addDomListener(window, 'load', initMap); *@

    </script>

    @{
        long currTimestamp = DateTime.Now.Ticks;
    }
    <script src="~/js/schemas/sumur_new.min.js?v=@currTimestamp"></script>
}   