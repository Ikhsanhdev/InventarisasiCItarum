"use strict";var dataTableAwlr,dataTableArr,dataTableWqms,dataTableAws,dataTableVnotch,dataTablePiezometer;const awlrMarker=L.layerGroup(),arrMarker=L.layerGroup(),awsMarker=L.layerGroup();var TabelMonitoring=function(){var a=function(){const a=L.map("map",{center:[parseFloat(mapLatitude),parseFloat(mapLongitude)],zoom:mapZoom,maxZoom:18,layers:[awlrMarker,arrMarker,awsMarker]});a.attributionControl.setPrefix(!1),new L.basemapsSwitcher([{layer:L.mapboxGL({accessToken:"pk.eyJ1IjoiaGFuZHlhc3dhbiIsImEiOiJjbDY3YmNmcGgwODAxM2R0YjZzY3ZkN3M5In0.7aDstmvWZvOmZIwyPfMB4g",style:"mapbox://styles/mapbox/streets-v11",attribution:`&copy;${(new Date).getFullYear()} ${organizationName} | Higertech`}).addTo(a),icon:"/images/basemaps/basemap-grayscale.jpg",name:"Grayscale"},{layer:L.mapboxGL({accessToken:"pk.eyJ1IjoiaGFuZHlhc3dhbiIsImEiOiJjbDY3YmNmcGgwODAxM2R0YjZzY3ZkN3M5In0.7aDstmvWZvOmZIwyPfMB4g",style:"mapbox://styles/mapbox/satellite-streets-v12",attribution:`${organizationName} &copy;${(new Date).getFullYear()}`}),icon:"/images/basemaps/basemap-satellite.jpg",name:"Satellite"},{layer:L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:`${organizationName} &copy;${(new Date).getFullYear()}`}),icon:"/images/basemaps/world-imagery.jpg",name:"W.Imagery"}],{position:"topright"}).addTo(a);const e={"Pos Duga Air":awlrMarker,"Pos Curah Hujan":arrMarker,"Pos Klimatologi":awsMarker},t=L.control.layers(null,e).addTo(a);L.easyButton("fa-home",function(a,e){e.setView([parseFloat(mapLatitude),parseFloat(mapLongitude)],mapZoom)}).addTo(a);L.TopoJSON=L.GeoJSON.extend({addData:function(a){var e,t;if("Topology"===a.type){for(t in a.objects)a.objects.hasOwnProperty(t)&&(e=topojson.feature(a,a.objects[t]),L.GeoJSON.prototype.addData.call(this,e));return this}return L.GeoJSON.prototype.addData.call(this,a),this}}),L.topoJson=function(a,e){return new L.TopoJSON(a,e)};const n=["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#ff6f61","#6a0572","#a6cee3","#1f78b4","#b2df8a"];let r=0;getData("/RiverArea/GetAllRiverArea").then(e=>{let s=e.data;200==s.code&&$.each(s.response,function(e,s){null!=s.shpFile&&""!=s.shpFile&&async function(a){let e=await fetch(a);return await e.json()}(`/uploads/watersheds/${s.organizationCode}/${s.shpFile}`).then(e=>{var l=L.topoJson(null,{onEachFeature:function(a,e){console.log(a.properties),null!=a.properties.NAMA_DAS&&""!=a.properties.NAMA_DAS?(e.bindTooltip(function(a,e){return`<p style="color: #fcfcfc;font-size: 0.55rem;margin: 0;">${a}</p>\n                <h5 style="font-size: 0.75rem;margin: 3px 0;"><span style="color: #0ECAF0;">#${e.KODE_DAS}: </span> <span style="color: #FFC10A;">${e.NAMA_DAS}</span></h5>\n            `}(`WS ${s.name}`,a.properties),{direction:"right",permanent:!1,sticky:!0,offset:[10,0],opacity:.9,className:"leaflet-tooltip-own"}).openTooltip(),e.setStyle({fill:!0,stroke:!0,color:"#502909",fillColor:n[r],weight:1,fillOpacity:.2}),e.on("mouseout",function(){e.setStyle({fillOpacity:.2,weight:1})}),e.on("mouseover",function(){e.setStyle({fillOpacity:.5,weight:1.5})})):e.setStyle({fill:!1,stroke:!1}),++r>24&&(r=0)}}).addTo(a);l.addData(e),t.addOverlay(l,`DAS WS ${s.name}`)})})}).catch(a=>{console.log(a.response)}),getData("/Home/GetAwlrLastReading").then(a=>{let e=a.data;200==e.code&&(awlrMarker.clearLayers(),$.each(e.response,function(a,e){let t="";switch(e.warningStatus){case"Normal":t="";break;case"Siaga 3":t="alert-siaga3";break;case"Siaga 2":t="alert-siaga2";break;case"Siaga 1":t="alert-siaga1";break;default:t=""}var n=L.divIcon({iconSize:new L.Point(40,20),iconAnchor:new L.Point(20,20),html:`<div class="ts-marker-wrapper"><a href="javascript:void(0)" class="ts-marker ts-awlr" data-ts-id="64" data-ts-ln="60" style="outline: none;"><div class="ts-marker__title">${e.name}</div><div class="ts-marker__feature ts-marker__feature__blue ${t}"><i class="fas fa-water"></i></div></a></div>`});L.marker([e.latitude,e.longitude],{icon:n}).bindPopup(createDetailPanelStation(e)).addTo(awlrMarker).options.id=e.id}))}).catch(a=>{console.log(a.response)}),getData("/Home/GetArrLastReading").then(a=>{let e=a.data;200==e.code&&(arrMarker.clearLayers(),$.each(e.response,function(a,e){var t="arr-icon-offline.png",n="";"Berawan"!=e.intensityLastHour&&"online"==e.deviceStatus&&(t=getIntensityIcon(e.intensityLastHour),"Berawan"!=e.intensityLastHour&&(n="blinking-content"));var r=L.divIcon({iconSize:new L.Point(40,20),iconAnchor:new L.Point(20,20),html:`<div class="ts-marker-wrapper"><a href="javascript:void(0)" class="ts-marker ts-arr" data-ts-id="64" data-ts-ln="60" style="outline: none;"><div class="ts-marker__title">${e.name}</div><image class="${n}" src="/images/arr/${t}" height="26" /></a></div>`});L.marker([e.latitude,e.longitude],{icon:r}).bindPopup(createDetailPanelStation(e)).addTo(arrMarker).options.id=e.id}))}).catch(a=>{console.log(a.response)}),getData("/Home/GetAwsLastReading").then(a=>{let e=a.data;200==e.code&&(awsMarker.clearLayers(),$.each(e.response,function(a,e){var t=L.divIcon({iconSize:new L.Point(40,20),iconAnchor:new L.Point(20,20),html:`<div class="ts-marker-wrapper"><a href="javascript:void(0)" class="ts-marker ts-aws" data-ts-id="64" data-ts-ln="60" style="outline: none;"><div class="ts-marker__title">${e.name}</div><div class="ts-marker__feature ts-marker__feature__red "><i class="bi bi-cloud-haze2-fill"></i></div></a></div>`});L.marker([e.latitude,e.longitude],{icon:t}).bindPopup(createDetailPanelStation(e)).addTo(awsMarker).options.id=e.id}))}).catch(a=>{console.log(a.response)})};return{init:function(){a(),$.fn.dataTable.ext.errMode="none",(dataTableAwlr=$("#awlr-table").DataTable({processing:!0,serverSide:!0,paging:!1,searching:!1,ordering:!1,info:!1,ajax:{url:"/Home/GetDatatableAwlrLastReading",type:"POST",dataType:"JSON",error:function(a,e,t){alert(formatErrorMessage(a,t))}},columns:[{data:null},{data:"Name",name:"Name",className:"text-nowrap",render:function(a,e,t){return"offline"==t.deviceStatus?`<i class="mdi mdi-alert-circle-outline me-1"></i><a href="/station/detail/${t.Slug}" target="_blank" class="text-danger fw-semibold" title="Offline" tabindex="0" data-plugin="tippy" data-tippy-animation="shift-away" data-tippy-arrow="true">${a}</a>`:`<a href="/Station/Detail/${t.Slug}" target="_blank" class="text-blue fw-semibold">${a}</a>`}},{data:"WatershedName",name:"WatershedName",render:function(a,e,t){return null==a?"-":a}},{data:"ReadingAt",name:"ReadingAt",className:"text-nowrap",render:function(a,e,t){return null!=a?`${moment(a).locale("id").format("D MMMM YYYY")}`:"-"}},{data:"ReadingAt",name:"ReadingAt",className:"text-center text-nowrap",render:function(a,e,t){return null!=a?`${moment(a).locale("id").format("HH:mm")}`:"-"}},{data:"WaterLevel",name:"WaterLevel",className:"text-center",createdCell:function(a,e,t,n,r){if($(a).removeClass("bg-normal"),$(a).removeClass("bg-siaga3"),$(a).removeClass("bg-siaga2"),$(a).removeClass("bg-siaga1"),$(a).removeClass("bg-nostatus"),"cmdpl"!=t.UnitSensor&&"mdpl"!=t.UnitSensor)switch(t.warningStatus){case"Normal":$(a).addClass("bg-normal");break;case"Siaga 3":$(a).addClass("bg-siaga3");break;case"Siaga 2":$(a).addClass("bg-siaga2");break;case"Siaga 1":$(a).addClass("bg-siaga1");break;default:$(a).addClass("bg-nostatus")}},render:function(a,e,t){return null==a?"-":"cmdpl"!=t.UnitSensor&&"mdpl"!=t.UnitSensor||a!=t.WaterLevelElevation?`<span class="text-dark fw-semibold">${a} ${t.UnitDisplay}</span>`:"-"}},{data:"WaterLevelElevation",name:"WaterLevelElevation",className:"text-center",createdCell:function(a,e,t,n,r){if($(a).removeClass("bg-normal"),$(a).removeClass("bg-siaga3"),$(a).removeClass("bg-siaga2"),$(a).removeClass("bg-siaga1"),$(a).removeClass("bg-nostatus"),"cmdpl"==t.UnitSensor||"mdpl"==t.UnitSensor)switch(t.WarningStatus){case"Normal":$(a).addClass("bg-normal");break;case"Siaga 3":$(a).addClass("bg-siaga3");break;case"Siaga 2":$(a).addClass("bg-siaga2");break;case"Siaga 1":$(a).addClass("bg-siaga1");break;default:$(a).addClass("bg-nostatus")}},render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a}</span>`}},{data:"ChangeStatus",name:"ChangeStatus",className:"text-center",render:function(a,e,t){return"constant"==a?"-":"increase"==a?`<div class="d-flex justify-content-center align-items-center">\n                                <i class="mdi mdi-arrow-up-circle text-danger font-16 me-1"></i>\n                                <small class="text-danger">${t.ChangeValue}</small>\n                            </div>`:"decrease"==a?`<div class="d-flex justify-content-center align-items-center">\n                                <i class="mdi mdi-arrow-down-circle text-success font-16 me-1"></i>\n                                <small class="text-success">${t.ChangeValue}</small>\n                            </div>`:""}},{data:"Debit",name:"Debit",className:"text-center",render:function(a,e,t){return null==a?"-":`<span class="fw-semibold">${a}</span>`}},{data:"Battery",name:"Battery",className:"text-center"}],columnDefs:[{targets:0,searchable:!1,orderable:!1,width:"6%",className:"text-center"}],language:{url:"/data/datatable_locale_id.json"},drawCallback:function(a){$('[data-plugin="tippy"]').length>0&&tippy('[data-plugin="tippy"]')}})).on("error.dt",function(a,e,t,n){console.log("An error has been reported by DataTables: ",n)}),dataTableAwlr.on("draw.dt",function(){var a=dataTableAwlr.page.info();dataTableAwlr.column(0,{search:"applied",order:"applied",page:"applied"}).nodes().each(function(e,t){e.innerHTML=t+1+a.start})}),(dataTableArr=$("#arr-table").DataTable({processing:!0,serverSide:!0,paging:!1,searching:!1,ordering:!1,info:!1,scrollX:!1,ajax:{url:"/Home/GetDatatableArrLastReading",type:"POST",dataType:"JSON"},columns:[{data:null},{data:"Name",name:"Name",render:function(a,e,t){return"offline"==t.deviceStatus?`<i class="mdi mdi-alert-circle-outline me-1"></i><a href="/Station/Detail/${t.Slug}" target="_blank" class="text-danger fw-semibold" title="Offline" tabindex="0" data-plugin="tippy" data-tippy-animation="shift-away" data-tippy-arrow="true">${a}</a>`:`<a href="/Station/Detail/${t.Slug}" target="_blank" class="text-blue fw-semibold">${a}</a>`}},{data:"WatershedName",name:"WatershedName",render:function(a,e,t){return null==a?"-":a}},{data:"ReadingAt",name:"ReadingAt",className:"text-nowrap",render:function(a,e,t){return null!=a?`${moment(a).locale("id").format("D MMMM YYYY")}`:"-"}},{data:"ReadingAt",name:"ReadingAt",className:"text-center",render:function(a,e,t){return null!=a?`${moment(a).locale("id").format("HH:mm")}`:"-"}},{data:"RainfallLastHour",name:"RainfallLastHour",className:"text-center",render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a}</span>`}},{data:"IntensityLastHour",name:"IntensityLastHour",className:"text-center text-nowrap",createdCell:function(a,e,t,n,r){switch(e){case"Berawan":$(a).addClass("bg-berawan");break;case"Hujan Ringan":$(a).addClass("bg-hujan-ringan");break;case"Hujan Sedang":$(a).addClass("bg-hujan-sedang");break;case"Hujan Lebat":$(a).addClass("bg-hujan-lebat");break;case"Hujan Sangat Lebat":$(a).addClass("bg-hujan-sangat-lebat")}},render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a}</span>`}},{data:"RainfallLastDay",name:"RainfallLastDay",className:"text-center",render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a}</span>`}},{data:"IntensityLastDay",name:"IntensityLastDay",className:"text-center text-nowrap",createdCell:function(a,e,t,n,r){switch(e){case"Berawan":$(a).addClass("bg-berawan");break;case"Hujan Ringan":$(a).addClass("bg-hujan-ringan");break;case"Hujan Sedang":$(a).addClass("bg-hujan-sedang");break;case"Hujan Lebat":$(a).addClass("bg-hujan-lebat");break;case"Hujan Sangat Lebat":$(a).addClass("bg-hujan-sangat-lebat")}},render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a}</span>`}},{data:"Battery",name:"Battery",className:"text-center",render:function(a,e,t){return null==a?"-":a}}],columnDefs:[{targets:0,searchable:!1,orderable:!1,width:"6%",className:"text-center"}],language:{url:"/data/datatable_locale_id.json"},drawCallback:function(a){$('[data-plugin="tippy"]').length>0&&tippy('[data-plugin="tippy"]')}})).on("draw.dt",function(){var a=dataTableArr.page.info();dataTableArr.column(0,{search:"applied",order:"applied",page:"applied"}).nodes().each(function(e,t){e.innerHTML=t+1+a.start})}),(dataTableWqms=$("#wqms-table").DataTable({processing:!0,serverSide:!0,paging:!1,searching:!1,ordering:!1,info:!1,scrollX:!1,ajax:{url:"/Home/GetDatatableMvWqmsLastReading",type:"POST",dataType:"JSON"},columns:[{data:null},{data:"name",name:"name",render:function(a,e,t){return`<a href="/Station/Detail/${t.slug}" target="_blank" class="text-blue fw-semibold">${a}</a>`}},{data:"readingAt",name:"readingAt",className:"text-center text-nowrap",render:function(a,e,t){return null!=a?`${moment(a).locale("id").format("D MMMM YYYY")}`:"-"}},{data:"readingAt",name:"readingAt",className:"text-center",render:function(a,e,t){return null!=a?`${moment(a).locale("id").format("HH:mm")}`:"-"}},{data:"temperature",name:"temperature",className:"text-center",render:function(a,e,t){return null==a?"-":a}},{data:"ph",name:"ph",className:"text-center",render:function(a,e,t){return null==a?"-":a}},{data:"orp",name:"orp",className:"text-center",render:function(a,e,t){return null==a?"-":a}},{data:"turbidity",name:"turbidity",className:"text-center",render:function(a,e,t){return null==a?"-":a}},{data:"battery",name:"battery",className:"text-center",render:function(a,e,t){return null==a?"-":a}}],columnDefs:[{targets:0,searchable:!1,orderable:!1,width:"6%",className:"text-center"}],language:{url:"/data/datatable_locale_id.json"}})).on("draw.dt",function(){var a=dataTableWqms.page.info();dataTableWqms.column(0,{search:"applied",order:"applied",page:"applied"}).nodes().each(function(e,t){e.innerHTML=t+1+a.start})}),(dataTableAws=$("#aws-table").DataTable({processing:!0,serverSide:!0,paging:!1,searching:!1,ordering:!1,info:!1,scrollX:!1,ajax:{url:"/Home/GetDatatableMvAwsLastReading",type:"POST",dataType:"JSON"},columns:[{data:null},{data:"name",name:"name",className:"text-nowrap",render:function(a,e,t){return"offline"==t.deviceStatus?`<i class="mdi mdi-alert-circle-outline me-1"></i><a href="/Station/Detail/${t.slug}" target="_blank" class="text-danger fw-semibold" title="Offline" tabindex="0" data-plugin="tippy" data-tippy-animation="shift-away" data-tippy-arrow="true">${a}</a>`:`<a href="/Station/Detail/${t.slug}" target="_blank" class="text-blue fw-semibold">${a}</a>`}},{data:"readingAt",name:"readingAt",className:"text-center text-nowrap",render:function(a,e,t){return null!=a?`${moment(a).locale("id").format("D MMMM YYYY")}`:"-"}},{data:"readingAt",name:"readingAt",className:"text-center text-nowrap",render:function(a,e,t){return null!=a?`${moment(a).locale("id").format("HH:mm")}`:"-"}},{data:"humidity",name:"humidity",className:"text-center",render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a}%</span><br/><small class="text-muted">${t.humidityStatus}</small>`}},{data:"intensityLastHour",name:"intensityLastHour",className:"text-center text-nowrap",createdCell:function(a,e,t,n,r){switch(e){case"Berawan":$(a).addClass("bg-berawan");break;case"Hujan Ringan":$(a).addClass("bg-hujan-ringan");break;case"Hujan Sedang":$(a).addClass("bg-hujan-sedang");break;case"Hujan Lebat":$(a).addClass("bg-hujan-lebat");break;case"Hujan Sangat Lebat":$(a).addClass("bg-hujan-sangat-lebat")}},render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${t.rainfallLastHour}</span><br/><small style="color: #555555;font-weight:500;">${a}</small>`}},{data:"pressure",name:"pressure",className:"text-center",render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a}</span>`}},{data:"solarRadiation",name:"solarRadiation",className:"text-center",render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a}</span>`}},{data:"temperature",name:"temperature",className:"text-center",render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a}</span>`}},{data:"windDirection",name:"windDirection",className:"text-center text-nowrap",render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a}&deg;</span><br/>\n                        <small class="d-flex justify-content-center align-items-center text-muted">\n                            <span style="transform: rotate(${a}deg);"><i class="mdi mdi-navigation"></i></span>\n                            <span class="ms-1">${t.windDirectionStatus}</span>\n                        </small>`}},{data:"windSpeed",name:"windSpeed",className:"text-center",render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a}</span>`}},{data:"evaporation",name:"evaporation",className:"text-center",render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a}</span>`}},{data:"battery",name:"battery",className:"text-center",render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a}</span>`}}],columnDefs:[{targets:0,searchable:!1,orderable:!1,width:"6%",className:"text-center"}],language:{url:"/data/datatable_locale_id.json"},drawCallback:function(a){$('[data-plugin="tippy"]').length>0&&tippy('[data-plugin="tippy"]')}})).on("draw.dt",function(){var a=dataTableAws.page.info();dataTableAws.column(0,{search:"applied",order:"applied",page:"applied"}).nodes().each(function(e,t){e.innerHTML=t+1+a.start})}),(dataTableVnotch=$("#vnotch-table").DataTable({processing:!0,serverSide:!0,paging:!1,searching:!1,ordering:!1,info:!1,ajax:{url:"/Home/GetDatatableMvVnotchLastReading",type:"POST",dataType:"JSON"},columns:[{data:null},{data:"name",name:"name",render:function(a,e,t){return`<a href="/Station/Detail/${t.slug}" target="_blank" class="text-blue fw-semibold">${a}</a>`}},{data:"readingAt",name:"readingAt",className:"text-center",render:function(a,e,t){return null!=a?`${moment(a).locale("id").format("D MMMM YYYY")}`:"-"}},{data:"readingAt",name:"readingAt",className:"text-center",render:function(a,e,t){return null!=a?`${moment(a).locale("id").format("HH:mm")}`:"-"}},{data:"waterLevel",name:"waterLevel",className:"text-center",render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a} ${t.unitDisplay}</span>`}},{data:"changeStatus",name:"changeStatus",className:"text-center",render:function(a,e,t){return"constant"==a?"":"increase"==a?`<div class="d-flex justify-content-center align-items-center">\n                                <i class="mdi mdi-arrow-up-circle text-danger font-16 me-1"></i>\n                                <small class="text-danger">${t.changeValue}</small>\n                            </div>`:"decrease"==a?`<div class="d-flex justify-content-center align-items-center">\n                                <i class="mdi mdi-arrow-down-circle text-success font-16 me-1"></i>\n                                <small class="text-success">${t.changeValue}</small>\n                            </div>`:""}},{data:"debit",name:"debit",className:"text-center",render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a} ${t.unitDebit}</span>`}},{data:"battery",name:"battery",className:"text-center"}],columnDefs:[{targets:0,searchable:!1,orderable:!1,width:"6%",className:"text-center"}],language:{url:"/data/datatable_locale_id.json"}})).on("draw.dt",function(){var a=dataTableVnotch.page.info();dataTableVnotch.column(0,{search:"applied",order:"applied",page:"applied"}).nodes().each(function(e,t){e.innerHTML=t+1+a.start})}),(dataTablePiezometer=$("#piezometer-table").DataTable({processing:!0,serverSide:!0,paging:!1,searching:!1,ordering:!1,info:!1,ajax:{url:"/Home/GetDatatableMvPiezometerLastReading",type:"POST",dataType:"JSON"},columns:[{data:null},{data:"name",name:"name",render:function(a,e,t){return`<a href="/Station/Detail/${t.slug}" target="_blank" class="text-blue fw-semibold">${a}</a>`}},{data:"readingAt",name:"readingAt",className:"text-center",render:function(a,e,t){return null!=a?`${moment(a).locale("id").format("D MMMM YYYY")}`:"-"}},{data:"readingAt",name:"readingAt",className:"text-center",render:function(a,e,t){return null!=a?`${moment(a).locale("id").format("HH:mm")}`:"-"}},{data:"waterLevel",name:"waterLevel",className:"text-center",render:function(a,e,t){return null==a?"-":`<span class="text-dark fw-semibold">${a} ${t.unitDisplay}</span>`}},{data:"changeStatus",name:"changeStatus",className:"text-center",render:function(a,e,t){return"constant"==a?"":"increase"==a?`<div class="d-flex justify-content-center align-items-center">\n                                <i class="mdi mdi-arrow-up-circle text-danger font-16 me-1"></i>\n                                <small class="text-danger">${t.changeValue}</small>\n                            </div>`:"decrease"==a?`<div class="d-flex justify-content-center align-items-center">\n                                <i class="mdi mdi-arrow-down-circle text-success font-16 me-1"></i>\n                                <small class="text-success">${t.changeValue}</small>\n                            </div>`:""}},{data:"battery",name:"battery",className:"text-center"}],columnDefs:[{targets:0,searchable:!1,orderable:!1,width:"6%",className:"text-center"}],language:{url:"/data/datatable_locale_id.json"}})).on("draw.dt",function(){var a=dataTablePiezometer.page.info();dataTablePiezometer.column(0,{search:"applied",order:"applied",page:"applied"}).nodes().each(function(e,t){e.innerHTML=t+1+a.start})}),loadCctv(),setInterval(loadLastReading,3e5)}}}();function loadLastReading(){dataTableAwlr.ajax.reload(),dataTableArr.ajax.reload(),datatableAwlrArr.ajax.reload(),datatableAws.ajax.reload(),loadCctv()}function loadCctv(){if($("#card-cctv").length>0){$("#card-cctv .card-body").html('<div class="text-center"><div class="spinner-border avatar-sm text-primary m-auto" role="status"></div></div>');let a=(new Date).getTime();getData("/Cctv/GetListCctv").then(e=>{let t=e.data;console.log(t);var n="";$.each(t,function(e,t){n+=`\n                    <div class="item" style="background-image: url('${t.Url}?v=${a}');">\n                        <a class="image-title image-popup" href="${t.Url}?v=${a}" title="${t.Name}">\n                            <div class="d-flex justify-content-between align-items-center">\n                                <span>${t.Name}</span>\n                                <i class="mdi mdi-eye"></i>\n                            </div>\n                        </a>\n                    </div>\n                `}),$("#card-cctv .card-body").html(`<div class="owl-carousel owl-theme" id="cctv-carousel">${n}</div>`),$(".owl-carousel").owlCarousel({autoplay:!0,autoplayTimeout:1e4,items:3,nav:!1,lazyLoad:!0,loop:!1,margin:10,responsiveClass:!0,responsive:{0:{items:1},600:{items:2},1000:{items:3}}}),$(".image-popup").magnificPopup({type:"image",closeOnContentClick:!1,closeBtnInside:!1,mainClass:"mfp-with-zoom mfp-img-mobile",image:{verticalFit:!0,titleSrc:function(a){return a.el.attr("title")}},gallery:{enabled:!0}})}).catch(a=>{let e=a.response.data;e.success||alert(e.message)})}}function getIntensityIcon(a){let e="pagi",t=moment();t.locale("id"),t.tz("Asia/Jakarta");let n=t.hours();e=n>=5&&n<10?"pagi":n>=10&&n<17?"siang":n>=17&&n<19?"sore":"malam";let r="berawan.png";switch(a){case"Berawan":r=`berawan-${e}.png`;break;case"Hujan Ringan":r="hujan-ringan.png";break;case"Hujan Sedang":r="hujan-sedang.png";break;case"Hujan Lebat":r="hujan-lebat.png";break;case"Hujan Sangat Lebat":r="hujan-sangat-lebat.png"}return r}function createDetailPanelStation(a){var e="/images/default-pu.png";if(null!=a.photo)e=`/uploads/images/stations/${a.photo}`;var t='<small class="mdi mdi-circle text-danger"></small> Offline';"online"==a.deviceStatus&&(t='<small class="mdi mdi-circle text-success"></small> Online');var n='<table class="table mb-2 font-12"><tbody>';if(n+="<tr>",n+=`<td class="px-0 py-2 pt-1" colspan="3">\n        <div class="d-flex align-items-start">\n            <img class="me-2 rounded-3" src="${e}" width="35" height="35" alt="${a.name}">\n            <div class="w-100">\n                <h5 class="mt-0 mb-1 fw-bold font-12" style="color: #2A62A6;">${a.name}</h5>\n                ${t}\n            </div>\n        </div>\n    </td>`,n+="</tr>",n+="<tr>",n+='<td class="py-1 px-0">Logger</td>',n+='<td class="py-1 px-2">:</td>',n+=`<td class="py-1 px-0 align-middle">\n        ${a.brandName} <span class="badge badge-outline-secondary rounded-1">${a.deviceId}</span>\n    </td>`,n+="</tr>",n+="<tr>",n+='<td class="py-1 px-0">Koordinat</td>',n+='<td class="py-1 px-2">:</td>',n+=`<td class="py-1 px-0 align-middle">\n        <a href="https://www.google.com/maps?q=${a.latitude},${a.longitude}" target="_blank">${a.latitude}, ${a.longitude}</a>\n    </td>`,n+="</tr>",null!=a.readingAt)if(n+="<tr>",n+='<td class="py-1 px-0">Waktu</td>',n+='<td class="py-1 px-2">:</td>',n+=`<td class="py-1 px-0">${moment(a.readingAt).locale("id").format("D MMMM YYYY HH:mm")} WIB</td>`,n+="</tr>","AWLR"==a.type){var r=null==a.waterLevelElevation?"-":`${a.waterLevelElevation.toFixed(2)} <sup>Mdpl</sup>`,s=null==a.debit?"-":`${a.debit} <sup>m3/s</sup>`,l=`${a.waterLevel.toFixed(2)} <sup>${a.unitDisplay}`;if("cmdpl"==a.unitSensor||"mdpl"==a.unitSensor)l="-";n+="<tr>",n+='<td class="py-1 px-0 nowrap">Tinggi Muka Air</td>',n+='<td class="py-1 px-2">:</td>',n+=`<td class="py-1 px-0 fw-semibold">${l}</td>`,n+="</tr>",n+="<tr>",n+='<td class="py-1 px-0 nowrap">Elevasi Muka Air</td>',n+='<td class="py-1 px-2">:</td>',n+=`<td class="py-1 px-0 fw-semibold">${r}</td>`,n+="</tr>",n+="<tr>",n+='<td class="py-1 px-0 nowrap">Debit</td>',n+='<td class="py-1 px-2">:</td>',n+=`<td class="py-1 px-0 fw-semibold">${s}</td>`,n+="</tr>"}else"ARR"==a.type&&(n+="<tr>",n+='<td class="py-1 px-0 nowrap">Curah Hujan</td>',n+='<td class="py-1 px-2">:</td>',n+=`<td class="py-1 px-0 fw-semibold">${a.rainfall.toFixed(2)} <sup>mm</sup></td>`,n+="</tr>",n+="<tr>",n+='<td class="py-1 px-0 nowrap">Curah Hujan Maks.</td>',n+='<td class="py-1 px-2">:</td>',n+=`<td class="py-1 px-0 fw-semibold">${a.rainfallMax.toFixed(2)} <sup>mm</sup></td>`,n+="</tr>");return n+="</tbody></table>",n+=`<a href="/Station/Detail/${a.slug}" target="_blank" class="btn btn-sm btn-primary rounded-pill waves-effect waves-light text-white w-100">Lihat Detail</a>`}jQuery(document).ready(function(){TabelMonitoring.init()});