"use strict";var datatablePengamat,DataPengamat={init:function(){$(".parsley-validation").parsley(),$("#search-pengamat-table").keyup(function(){datatablePengamat.search($(this).val()).draw()}),$("#length-pengamat-table").change(function(){datatablePengamat.page.len($(this).val()).draw()}),(datatablePengamat=$("#table-pengamat").DataTable({processing:!0,serverSide:!0,dom:"tipr",order:[[1,"asc"]],ajax:{url:"/User/GetDatatablePengamat",type:"POST",contentType:"application/json",dataType:"JSON",data:function(a){return JSON.stringify(a)}},columns:[{data:null},{data:"name",name:"name"},{data:"phone",name:"phone"},{data:"address",name:"address"},{data:"stationObserverUsers[0].name",name:"stationObserverUsers[0].name"},{render:function(a,e,t){return`<button type="button" class="btn btn-xs btn-success me-1" data-id="${t.id}" onclick="createEditPengamat(this, event)"><i class="mdi mdi-square-edit-outline me-1"></i>Edit</button>\n                            <button type="button" class="btn btn-xs btn-danger" data-id="${t.id}" onclick="deletePengamat(this, event)"><i class="mdi mdi-delete me-1"></i>Delete</button>`}}],columnDefs:[{targets:0,searchable:!1,orderable:!1,width:"9%",className:"text-center"},{targets:4,orderable:!1},{targets:-1,searchable:!1,orderable:!1,width:"18%",className:"text-center"}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})).on("draw.dt",function(){var a=datatablePengamat.page.info();datatablePengamat.column(0,{search:"applied",order:"applied",page:"applied"}).nodes().each(function(e,t){e.innerHTML=t+1+a.start})})}};jQuery(document).ready(function(){DataPengamat.init()}),window.createEditPengamat=((a,e)=>{e.preventDefault();var t=$(a).html();console.log(t),beforeLoadingButton($(a));var n=$(a).data("id"),d=new FormData;d.append("Id",n),postData("/User/CreateEditPengamat",d).then(e=>{let n=e.data;$("#modalCreateEditPengamat .modal-content").html(n),$("#modalCreateEditPengamat").modal("show"),afterLoadingButton($(a),t)})}),window.savePengamat=((a,e)=>{e.preventDefault();var t=$(a).find("button[type=submit]");if($(a).parsley().validate(),$(a).parsley().isValid()){beforeLoadingButton(t);var n=new FormData;n.append("Id",getValueById("Id")),n.append("Name",getValueById("Name")),n.append("Phone",getValueById("Phone")),n.append("Password",getValueById("Password")),n.append("Address",getValueById("Address")),postData("/User/SavePengamat",n).then(a=>{let e=a.data;200==e.code?($("#modalCreateEditPengamat").modal("hide"),showMessage("success","Sukses!",e.message),datatablePengamat.ajax.reload()):showMessage("error","Gagal!",e.message),afterLoadingButton(t)}).catch(a=>{console.log(a),afterLoadingButton(t)})}}),window.deletePengamat=((a,e)=>{e.preventDefault();var t=$(a).data("id");Swal.fire({title:"Hapus Pengamat",text:"Anda yakin untuk menghapus pengamat tersebut ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",showLoaderOnConfirm:!0,preConfirm:a=>deleteData("/User/DeletePengamat/"+t).then(a=>{if(200!==a.status)throw new Error(a.statusText);return a}).catch(a=>{Swal.showValidationMessage(`Request failed: ${a}`)}),allowOutsideClick:()=>!Swal.isLoading()}).then(a=>{console.log(a),a.isConfirmed&&(200==a.value.data.code?($("#modalCreateEditPengamat").modal("hide"),showMessage("success","Sukses!",a.value.data.message),datatablePengamat.ajax.reload()):showMessage("error","Failed",a.value.data.message))})});