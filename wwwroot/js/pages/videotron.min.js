"use strict";const timezone="WIB";var contentPopup,contentPDA="";const timerGetData=3e5;var initVideotron={init:function(){$.ajax({url:"Reading/GetLastReading",type:"GET",dataType:"JSON",beforeSend:function(){},success:function(e){if(console.log("mulai ...."),e.length>0){var t=[],a=[];$.each(e,function(e,n){let i="",s="",l="",d="",r="bg-awlr-normal",o="",c=0,p="none",g="rgba(77,194,126,0.2)",m="",v="",f="",h="",u="",w="",b=" <p>-</p>";if(n.devices.length>0)switch(contentPopup="",n.type){case"AWLR":if(null!=n.devices[0].awlrLastReading){switch(null!=n.devices[0].awlrLastReading.waterLevel&&(o=n.devices[0].awlrLastReading.waterLevel),null!=n.devices[0].awlrLastReading.waterLevelMin&&(f=n.devices[0].awlrLastReading.waterLevelMin),null!=n.devices[0].awlrLastReading.waterLevelMax&&(h=n.devices[0].awlrLastReading.waterLevelMax),i=null==n.devices[0].awlrLastReading.readingAt?"Data tidak tersedia":`${s=moment(n.devices[0].awlrLastReading.readingAt).locale("id").format("D MMMM YYYY")} ${l=moment(n.devices[0].awlrLastReading.readingAt).locale("id").format("HH:mm")} WIB`,n.devices[0].awlrLastReading.wlStatus){case"Normal":r="bg-awlr-normal",d="Normal";break;case"Siaga 3":r="bg-awlr-siaga3",d="Siaga 3",g="rgba(239,83,80,0.2)";break;case"Siaga 2":r="bg-awlr-siaga2",d="Siaga 2",g="rgba(255,166,2,0.2)";break;case"Siaga 1":r="bg-awlr-siaga1",d="Siaga 1",g="rgba(255,218,79,0.2)";break;default:r="bg-awlr-normal",d="Normal"}switch(n.devices[0].awlrLastReading.changeStatus){case"increase":v="text-danger",m=`+${n.devices[0].awlrLastReading.changeValue}`,c=0,p="block";break;case"decrease":v="text-success",m=`${n.devices[0].awlrLastReading.changeValue}`,c="180deg",p="block";break;default:v="",m="",c=0,p="none"}var x="-";null!=n.devices[0].awlrLastReading.debit&&(x=n.devices[0].awlrLastReading.debit+" m3/s"),t.push(templatePDA(r,d,i,n.name,x,o,g,m,c,v,p))}break;case"ARR":if(null!=n.devices[0].arrLastReading){var y='<div class="col-sm-3 content-sensor bg-no-data d-flex text-center">\n                                            <div class="justify-content-center align-self-center w-100">\n                                                <h4>-</h4>\n                                            </div>\n                                        </div>';null!=n.devices[0].arrLastReading.rainfallHour&&(w=n.devices[0].arrLastReading.rainfallHour),i=null==n.devices[0].arrLastReading.readingAt?"Data tidak tersedia":`${s=moment(n.devices[0].arrLastReading.readingAt).locale("id").format("dddd, D MMMM YYYY")} ${l=moment(n.devices[0].arrLastReading.readingAt).locale("id").format("HH:00")} WIB`,null!=n.devices[0].arrLastReading.intensityHour&&(y=`<div class="col-sm-3 content-sensor bg-arr">\n                                                <div class="d-flex text-center bg-arr-am">\n                                                    <div class="justify-content-center align-self-center w-100">\n                                                        ${b=`<img src="/images/intensity/" alt="${u=n.devices[0].arrLastReading.intensityHour}">\n                                                <p class="text-intensity">${u}</p>`}\n                                                    </div>\n                                                </div>\n                                            </div>`);var L=`<div class="card content-logger mb-1">\n                                            <div class="row no-gutters">\n                                                ${y}\n                                                <div class="col-sm-9">\n                                                    <div class="card-body content-station">\n                                                        <div class="d-flex w-100 justify-content-between">\n                                                            <h6 class="mb-1 mt-0 me-1">${n.name}</h6>\n                                                            <span class="badge badge-outline-secondary mb-1 font-12" style="align-self: flex-start;">Curah Hujan: ${w}</span>\n                                                        </div>\n                                                        <p class="card-text font-12">${i}</p>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>`;document.getElementById("arr-"+n.id)?$("#arr"+n.id).html(L):$("#group-arr").append(`<div class="card-station" data-id="${n.id}" onclick="loadStationDetailCard(this, event)" id="arr-${n.id}">\n                                                    ${L}\n                                                </div>`),contentPopup=`<div class="table-responsive mb-2">\n                                            <table class="table table-sm mb-0">\n                                                <thead class="table-light">\n                                                    <tr>\n                                                        <th>Sensor</th>\n                                                        <th>Nilai</th>\n                                                        <th>Intensitas</th>\n                                                    </tr>\n                                                </thead>\n                                                <tbody>\n                                                    <tr>\n                                                        <td><strong>Curah Hujan</strong> (mm)</td>\n                                                        <td class="text-center fw-bold">${w}</td>\n                                                        <td class="text-center fw-bold">${u}</td>\n                                                    </tr>\n                                                </tbody>\n                                            </table>\n                                        </div>`,a.push(templatePCH("image",u,n.name,i,w))}}})}var n=$("#pda-carausel"),i=$("#pch-carausel");$.each(t,function(e,t){n.append(t)}),$.each(a,function(e,t){i.append(t)}),$(".owl-carousel").owlCarousel({loop:!0,margin:10,nav:!1,dots:!1,autoplay:!0,autoplayTimeout:5e3,items:1})},error:function(e,t,a){}})}};function templatePDA(e,t,a,n,i,s,l,d,r,o,c){return`<div class="item item-pos" id="pos-duga-air">\n            <div class="box-detail ${e}" style="display: flex; flex-direction: column; width: 100%; height: 100%; border-radius: 50px;">\n                <div class="info-time" style="display: flex; justify-content: space-between; width: 100%; padding-left: 70px;padding-right: 70px;  border-radius: 10px; height: 15%; align-items: center;">\n                    <span style="display: block; font-size: 55px; color: white;font-weight:600;">${t}</span>\n                    <span style="display: block; font-size: 55px; color: white; font-weight:600;">${a}</span>\n                </div>\n                <div class="info-details" style="width: 100%; height: 85%; display: flex; background-color: #FAFAFA; border-radius: 50px; padding-left:70px">\n                    <div class="image-pos" style="width: 30%; height: 100%; display: flex; flex-direction: column; align-items: center;justify-content: center; padding-right: 20px; padding-top:40px;padding-bottom: 40px";>\n                        <img src="https://localhost:7107/images/default-image.png" alt="image pos" >\n                    </div>\n                    <div class="name-pos" style="width: 50%;  height: 100%; display: flex; flex-direction: column; align-items: center; padding-left: 20px; padding-right: 20px; justify-content: center;">\n                        <div class="box-title-pos mb-2" style="width: 100%; word-wrap: break-word; font-size: 55px; font-weight: 500; color:#1A1A1A">\n                            ${n}\n                        </div>\n                        <div class="box-Debit-pos mb-3" style="width: 100%; word-wrap: break-word; font-size: 45px; font-weight: 500; color:#7F7F7F">\n                            Debit: ${i}\n                        </div>\n                        <div style="width: 100%;">\n                            <div class="box-parameter-pos progress-meter" style="width: 100%;">\n                            <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 4 m"><span class="meter-text">0</span></div>\n                                        <div class="meter meter-waspada meter-left" style="width: 25%;" title="Waspada <br> 4 m - 6 m"><span class="meter-text">1.5 m</span></div>\n                                        <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga <br> 6 m - 8 m"><span class="meter-text">1.7 m</span></div>\n                                        <div class="meter meter-awas meter-left" style="width: 25%;" title="Awas <br> > 8 m"><span class="meter-text">2 m</span></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="tma-pos" style="width: 25%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center;">\n                        <div class="circle-tma mb-3" style="width: 250px; height: 250px; border: 30px solid ${l}; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center;">\n                            <span style="display: block; font-size: 60px; font-weight: 600; color:#505050"> ${s}</span>\n                            <span style="display: block; font-size: 40px; font-weight: 400; color:#505050"> meter</span>\n                        </div>\n                        <div class="info-tma" style="display: ${c}">\n                            <p class="text-change-status">\n                                <span class="${o}" style="margin-right: 1px; font-size: 2.5rem;-webkit-transform: rotate(${r});transform: rotate(${r});display: inline-block;">â–²</span>\n                                <span class="fst-italic ${o} fw-bold" style="font-size: 2.5rem;"> ${d} m</span>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`}function templatePCH(e,t,a,n,i){return` <div class="item item-pos" id="pos-curah-hujan">\n                       <div class="box-detail" style="display: flex; flex-direction: column; width: 100%; height: 519px; border-radius: 50px;">\n                \n                <div class="info-details" style="width: 100%; height: 519px!important; display: flex; background-color: #FAFAFA; border-radius: 50px; padding-left:70px; align-items:center">\n                    <div class="image-pos bg-arr" style="width: 30%; height: 70%; display: flex; flex-direction: column; align-items: center;justify-content: center; padding-right: 20px;">\n                        <div class="d-flex text-center bg-arr-am" style="border-radius: 10px">\n                            <div class="justify-content-center align-self-center w-100" style="display: flex; align-items: center; justify-content: center; flex-direction: column;">\n                                <div class="arr-image" style="width: 50%;">\n                                    <img src="/images/intensity/${getIntensityIcon(t)}" alt="${t}" style="height: 180px;">\n                                </div>\n                                <div>\n                                    <p class="text-intensity" style="font-size:2.5rem;">${t}</p>\n                                </div>\n                            </div>\n                        </div>\n                                                \n                    </div>\n                    <div class="name-pos" style="width: 50%;  height: 100%; display: flex; flex-direction: column; align-items: center; padding-left: 20px; padding-right: 20px; justify-content: center;">\n                        <div class="box-title-pos mb-2" style="width: 100%; word-wrap: break-word; font-size: 55px; font-weight: 600; color: #1A1A1A">\n                            ${a}\n                        </div>\n                        <div class="box-Debit-pos mb-3" style="width: 100%; word-wrap: break-word; font-size: 55px; font-weight: 600; color: #7F7F7F">\n                            ${n}\n                        </div>\n                    </div>\n                    <div class="tma-pos" style="width: 25%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center;">\n                        <div class="circle-tma mb-3" style="width: 250px; height: 250px; border: 30px solid rgba(0, 0, 0, .2); border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center;">\n                            <span style="display: block; font-size: 60px; font-weight: 600; color:#505050"> ${i}</span>\n                            <span style="display: block; font-size: 40px; font-weight: 300;"> mm</span>\n                        </div>\n                        \n                    </div>\n                </div>\n            </div>\n        </div>`}function getIntensityIcon(e){let t="";switch(e){case"Berawan":t="berawan.png";break;case"Hujan Ringan":t="hujan-ringan.png";break;case"Hujan Sedang":t="hujan-sedang.png";break;case"Hujan Lebat":t="hujan-lebat.png";break;case"Hujan Sangat Lebat":t="hujan-sangat-lebat.png"}return t}$(document).ready(()=>{setInterval(showDateClock,1e3);initVideotron.init();setInterval(initVideotron.init,3e5)}),window.showDateClock=function(){let e=moment();e.locale("id"),e.tz("Asia/Jakarta"),$("#show_date").html('<i class="fe-calendar"></i> '+e.format("D MMMM YYYY")+" "+e.format("HH:mm:ss")+" WIB")};