"use strict";var dataTableCctv,DataCctv={init:function(){$(".parsley-validation").parsley(),$("#search-station-table").keyup(function(){dataTableCctv.search($(this).val()).draw()}),$("#length-station-table").change(function(){dataTableCctv.page.len($(this).val()).draw()}),(dataTableCctv=$("#table-Cctv").DataTable({processing:!0,serverSide:!0,dom:"tipr",order:[[1,"asc"]],ajax:{url:"/Cctv/GetdataTableCctv",type:"POST",contentType:"application/json",dataType:"JSON",data:function(a){return JSON.stringify(a)}},columns:[{data:null},{data:"name",name:"name"},{data:"url",name:"url"},{render:function(a,t,e){return`<button type="button" class="btn btn-xs btn-success me-1" data-id="${e.id}" onclick="createEdit(this, event)"><i class="mdi mdi-square-edit-outline me-1"></i>Edit</button>\n                         <button type="button" class="btn btn-xs btn-danger" data-id="${e.id}" onclick="deleteCctv(this, event)"><i class="mdi mdi-delete me-1"></i>Delete</button>`}}],columnDefs:[{targets:0,searchable:!1,orderable:!1,width:"9%",className:"text-center"},{targets:-1,searchable:!1,orderable:!1,width:"18%",className:"text-center"}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})).on("draw.dt",function(){var a=dataTableCctv.page.info();dataTableCctv.column(0,{search:"applied",order:"applied",page:"applied"}).nodes().each(function(t,e){t.innerHTML=e+1+a.start})})}};function createEdit(a,t){var e=$(a).html();beforeLoadingButton($(a));var n=$(a).data("id"),d=new FormData;d.append("Id",n),postData("/Cctv/CreateEdit",d).then(t=>{let n=t.data;console.log(n),$("#modalCreateEdit .modal-content").html(n),$("#modalCreateEdit").modal("show"),afterLoadingButton($(a),e)})}function deleteCctv(a,t){var e=$(a).data("id");Swal.fire({title:"Hapus CCTV",text:"Anda yakin untuk menghapus CCTV tersebut ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",showLoaderOnConfirm:!0,preConfirm:a=>deleteData("/Cctv/DeleteCctv/"+e).then(a=>{if(200!==a.status)throw new Error(a.statusText);return a}).catch(a=>{Swal.showValidationMessage(`Request failed: ${a}`)}),allowOutsideClick:()=>!Swal.isLoading()}).then(a=>{a.isConfirmed&&(200==a.value.data.code?($("#modalCreateEdit").modal("hide"),showMessage("success","Sukses!",a.value.data.message),dataTableCctv.ajax.reload()):showMessage("error","Failed",a.value.data.message))})}jQuery(document).ready(function(){DataCctv.init()}),window.saveCctv=((a,t)=>{t.preventDefault();var e=$(a).find("button[type=submit]");if($(a).parsley().validate(),$(a).parsley().isValid()){beforeLoadingButton(e);var n=new FormData;n.append("Id",getValueById("Id")),n.append("Name",getValueById("Name")),n.append("Url",getValueById("Url")),postData("/Cctv/SaveUpdateCctv",n).then(a=>{let t=a.data;200==t.code?($("#modalCreateEdit").modal("hide"),showMessage("success","Sukses!",t.message),dataTableCctv.ajax.reload()):showMessage("error","Gagal!",t.message),afterLoadingButton(e)}).catch(a=>{console.log(a),afterLoadingButton(e)})}});