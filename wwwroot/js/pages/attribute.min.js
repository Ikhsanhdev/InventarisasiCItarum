"use strict";var datatableAttribute,DataAttribute={init:function(){$(".parsley-validation").parsley(),getData("/DatasetSetup/CreateEditAttribute").then(t=>{let e=t.data;console.log(e)}).catch(t=>{let e=t.response.data;console.log(e),e.success||alert(e.message)}),(datatableAttribute=$("#table-attribute").DataTable({processing:!0,serverSide:!0,dom:"tipr",order:[[1,"asc"]],ajax:{url:"/Datasetsetup/GetDatatableAttribute",type:"POST",contentType:"application/json",dataType:"JSON",data:function(t){return JSON.stringify(t)}},columns:[{data:null},{data:"attrCode",name:"attrCode",className:"fw-bold"},{data:"attrDesc",name:"attrDesc"},{render:function(t,e,a){return`<button type="button" class="btn btn-xs btn-success me-1" data-code="${a.attrCode}" onclick="createEditAttribute(this, event)"><i class="mdi mdi-square-edit-outline me-1"></i>Edit</button>\n                            <button type="button" class="btn btn-xs btn-danger" data-code="${a.attrCode}" onclick="deleteAttribute(this, event)"><i class="mdi mdi-delete me-1"></i>Delete</button>`}}],columnDefs:[{targets:0,searchable:!1,orderable:!1,width:"9%",className:"text-center"},{targets:-1,searchable:!1,orderable:!1,width:"18%",className:"text-center"}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})).on("draw.dt",function(){var t=datatableAttribute.page.info();datatableAttribute.column(0,{search:"applied",order:"applied",page:"applied"}).nodes().each(function(e,a){e.innerHTML=a+1+t.start})})}};jQuery(document).ready(function(){DataAttribute.init()}),window.createEditAttribute=((t,e)=>{e.preventDefault();var a=$(t).html();console.log(a),beforeLoadingButton($(t));var o=$(t).data("code"),r=new FormData;r.append("AttrCode",o),postData("/DatasetSetup/CreateEditAttribute",r).then(e=>{let o=e.data;$("#modalCreateEditAttribute .modal-content").html(o),$("#modalCreateEditAttribute").modal("show"),afterLoadingButton($(t),a)})}),window.saveAttribute=((t,e)=>{e.preventDefault();var a=$(t).find("button[type=submit]");if($(t).parsley().validate(),$(t).parsley().isValid()){beforeLoadingButton(a);var o=new FormData;o.append("AttrCode",getValueById("AttrCode")),o.append("AttrDesc",getValueById("AttrDesc")),o.append("RowMode",getValueById("RowMode")),postData("/DatasetSetup/SaveAttribute",o).then(t=>{let e=t.data;200==e.code?($("#modalCreateEditAttribute").modal("hide"),showMessage("success","Success!",e.message),datatableAttribute.ajax.reload()):showMessage("error","Failed",e.message),afterLoadingButton(a)}).catch(t=>{console.log(t),afterLoadingButton(a)})}}),window.deleteAttribute=((t,e)=>{e.preventDefault();var a=$(t).data("code");Swal.fire({title:"Confirm Delete",text:"Are you sure want to delete this attribute ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel",showLoaderOnConfirm:!0,preConfirm:t=>deleteData("/DatasetSetup/DeleteAttribute/"+a).then(t=>{if(200!==t.status)throw new Error(t.statusText);return t}).catch(t=>{Swal.showValidationMessage(`Request failed: ${t}`)}),allowOutsideClick:()=>!Swal.isLoading()}).then(t=>{console.log(t),t.isConfirmed&&(200==t.value.data.code?($("#modalCreateEditAttribute").modal("hide"),showMessage("success","Success!",t.value.data.message),datatableAttribute.ajax.reload()):showMessage("error","Failed",t.value.data.message))})});