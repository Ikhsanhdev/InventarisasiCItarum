"use strict";var dataTablePetak,dataPetak={init:function(){$(".parsley-validation").parsley(),$("#search-petak-table").keyup(function(){dataTablePetak.search($(this).val()).draw()}),$("#length-petak-table").change(function(){dataTablePetak.page.len($(this).val()).draw()}),(dataTablePetak=$("#table-petak").DataTable({processing:!0,serverSide:!0,dom:"tipr",order:[[2,"asc"]],ajax:{url:"/Master/GetDataPetak",type:"POST",dataType:"JSON"},columns:[{data:null},{data:"namaPetak",name:"NamaPetak"},{data:"jenisBangunan",name:"JenisBangunan"},{data:"namaBangunan",name:"NamaBangunan"},{data:"luas",name:"Luas"},{data:"debitKebutuhan",name:"DebitKebutuhan"},{data:"location",name:"Location"},{className:"text-nowrap",render:function(a,e,t){return`<button type="button" class="btn btn-xs btn-success me-1 rounded-2" data-id="${t.id}" onclick="createEditPetak(this, event)"><i class="mdi mdi-square-edit-outline me-1"></i>Edit</button>\n                                    <button type="button" class="btn btn-xs btn-danger rounded-2" data-id="${t.id}" onclick="deletePetak(this, event)"><i class="mdi mdi-delete me-1"></i>Delete</button>`}}],columnDefs:[{targets:0,searchable:!1,orderable:!1,width:"9%",className:"text-center"},{targets:-1,searchable:!1,orderable:!1,width:"18%",className:"text-center"}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})).on("draw.dt",function(){var a=dataTablePetak.page.info();dataTablePetak.column(0,{search:"applied",order:"applied",page:"applied"}).nodes().each(function(e,t){e.innerHTML=t+1+a.start})})}};jQuery(document).ready(function(){dataPetak.init()}),window.createEditPetak=((a,e)=>{e.preventDefault();var t=$(a).html();beforeLoadingButton($(a));var n=$(a).data("id"),d=new FormData;d.append("Id",n),postData("/Master/CreateEditPetak",d).then(e=>{let n=e.data;$("#modalCreateEditPetak .modal-content").html(n),$("#modalCreateEditPetak").modal("show"),afterLoadingButton($(a),t)})}),window.savePetak=((a,e)=>{e.preventDefault();var t=$(a).find("button[type=submit]");if($(a).parsley().validate(),$(a).parsley().isValid()){beforeLoadingButton(t);var n=new FormData;n.append("Id",getValueById("Id")),n.append("NamaPetak",getValueById("NamaPetak")),n.append("JenisBangunan",getValueById("JenisBangunan")),n.append("Luas",getValueById("Luas")),n.append("DebitKebutuhan",getValueById("DebitKebutuhan")),n.append("Location",getValueById("Location")),postData("/Master/SavePetak",n).then(a=>{let e=a.data;200==e.code?($("#modalCreateEditPetak").modal("hide"),showMessage("success","Sukses!",e.message),dataTablePetak.ajax.reload()):showMessage("error","Gagal!",e.message),afterLoadingButton(t)}).catch(a=>{console.log(a),afterLoadingButton(t)})}}),window.deletePetak=((a,e)=>{e.preventDefault();var t=$(a).data("id");Swal.fire({title:"Hapus Petak",text:"Anda yakin untuk menghapus Petak tersebut ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",showLoaderOnConfirm:!0,preConfirm:()=>deleteData("/Master/DeletePetak/"+t).then(a=>{if(200!==a.status)throw new Error(a.statusText);return a}).catch(a=>{Swal.showValidationMessage(`Request failed: ${a}`)}),allowOutsideClick:()=>!Swal.isLoading()}).then(a=>{console.log(a),a.isConfirmed&&(200==a.value.data.code?(showMessage("success","Sukses!",a.value.data.message),dataTablePetak.ajax.reload()):showMessage("error","Failed",a.value.data.message))})});