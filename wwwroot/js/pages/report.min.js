"use strict";var dataTableReport;let periode,TYPE="AWLR";var DataReport={init:function(){$("#periode").datepicker({format:"MM yyyy",startView:"months",minViewMode:"months",beforeShowMonth:function(e){return e.valueOf()<=(new Date).valueOf()},autoclose:!0,altFormat:"yyyy-mm",altField:"#get-periode"}).on("changeDate",function(e){var a=e.date.getFullYear()+"-"+("0"+(e.date.getMonth()+1)).slice(-2);$("#get-periode").val(a)}),$("#periode").datepicker("setDate",new Date),$("#search-station-table").keyup(function(){dataTableReport.search($(this).val()).draw()}),$("#length-station-table").change(function(){dataTableReport.page.len($(this).val()).draw()}),$("#type").selectize(),(dataTableReport=$("#table-report").DataTable({processing:!0,serverSide:!0,paging:!1,dom:"rti",order:[[2,"asc"]],ajax:{url:"/Report/GetdataTableReport?type="+TYPE,type:"POST",contentType:"application/json",dataType:"JSON",data:function(e){return JSON.stringify(e)}},columns:[{data:null},{data:"name",name:"name"},{data:"type",name:"type",render:function(e,a,t){return"ARR"==e?"POS CURAH HUJAN":"POS DUGA AIR"}},{render:function(e,a,t){return"AWLR"==t.type?`<button onclick="downloadData(this,event);" type="button" class="btn btn-xs btn-blue me-1" data-id="${t.id}" data-type="${t.type}"><i class="fe-download me-1"></i> Download</button>`:`<button onclick="downloadData(this,event);" type="button" class="btn btn-xs btn-success me-1" data-id="${t.id}" data-type="${t.type}"><i class="fe-download me-1"></i> Download</button>`}}],columnDefs:[{targets:0,searchable:!1,orderable:!1,width:"9%",className:"text-center"},{targets:-1,searchable:!1,orderable:!1,width:"18%",className:"text-center"}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})).on("draw.dt",function(){var e=dataTableReport.page.info();dataTableReport.column(0,{search:"applied",order:"applied",page:"applied"}).nodes().each(function(a,t){a.innerHTML=t+1+e.start})})}};function downloadData(e,a){a.preventDefault(),periode=$("#get-periode").val();const t=`/Report/DownloadData?stationid=${$(e).data("id")}&type=${$(e).data("type")}&periode=${periode}`;window.open(t,"_blank")}function searchData(e,a){a.preventDefault(),console.log($("#search-report-table").val()),dataTableReport.ajax.reload()}jQuery(document).ready(function(){DataReport.init(),$("#periode").trigger("change"),$("#type").selectize()}),$("#periode").on("change",function(){periode=$("#get-periode").val()}),$("#type").on("change",function(){dataTableReport.destroy(),TYPE=$(this).val(),DataReport.init(),dataTableReport.ajax.reload()});