"use strict";var dataTableSumur,dataSumur={init:function(){dataTableSumur=$("#table-sumur").DataTable({processing:!0,serverSide:!0,dom:"tipr",order:[[5,"asc"]],ajax:{url:"/Sumur/GetSumurData",type:"POST",dataType:"JSON",data:function(e){e.filter_date=getValueById("monthpicker")}},columns:[{data:"code"},{data:"alamat"},{data:"kedalaman_bor"},{data:"debit_sumur"},{data:"kondisi_sumur"},{data:"kondisi_mesin"},{data:"kondisi_pompa"},{data:"kondisi_rumah_pompa"},{data:"irigasi_pipa_saluran"},{data:"irigasi_box_pembagi"},{data:"status"},{className:"text-nowrap",className:"text-center",className:"no-export",orderable:!1,render:function(e,a,t){return`<button onclick="editSumur(this,event);" data-id="${t.id}" type="button" class="btn btn-sm btn-success btn-icon me-1">Edit</i></button>  <button onclick="deleteSumur(this, event);" data-id="${t.id}" type="button" class="btn btn-sm btn-danger btn-icon">Hapus</button>`}}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})}};function formatDate(e,a){const t=new Date(e),n=t.getDate(),u=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][t.getMonth()],d=t.getFullYear(),i=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0");return"tanggal"===a?`${n} ${u} ${d}`:"update"===a?`${n} ${u} ${d} ${i}:${o}`:void 0}jQuery(document).ready(function(){dataSumur.init()}),window.saveSumur=((e,a)=>{a.preventDefault();var t=$(e).find("button[type=submit]");if($(e).parsley().validate(),$(e).parsley().isValid()){beforeLoadingButton(t);var n=new FormData;n.append("Id",getValueById("Id")),n.append("Code",document.getElementById("kode").value),n.append("Alamat",document.getElementById("alamat").value),n.append("SumberEnergi",document.getElementById("sumber_energi").value),n.append("Latitude",document.getElementById("latitude").value),n.append("Longitude",document.getElementById("longitude").value),n.append("TahunPengeboran",document.getElementById("tahun_pengeboran").value),n.append("tahunRehab",document.getElementById("tahun_rehab").value),n.append("TahunPerbaikanJiat",document.getElementById("tahun_perbaikan_jiat").value),n.append("TahunPerbaikanMesin",document.getElementById("tahun_perbaikan_Mesin").value),n.append("KedalamanBor",document.getElementById("kedalaman_bor").value),n.append("DebitSumur",document.getElementById("debit").value),n.append("KondisiSumur",document.getElementById("kondisi_sumur").value),n.append("KondisiMesin",document.getElementById("kondisi_mesin").value),n.append("KondisiPompa",document.getElementById("kondisi_pompa").value),n.append("KondisiRumahPompa",document.getElementById("kondisi_rumah_pompa").value),n.append("IrigasiPipaSaluran",document.getElementById("irigasi_pipa_saluran").value),n.append("IrigasiBoxPembagi",document.getElementById("irigasi_box_pembagi").value),n.append("FungsiAirBaku",document.getElementById("fungsi_air_baku").value),n.append("FungsiIrigasi",document.getElementById("fungsi_irigasi").value),n.append("Status",document.getElementById("status").value),n.append("Note",document.getElementById("note").value),postData("/Sumur/SaveSumur",n).then(e=>{let a=e.data;200==a.code?(showMessage("success","Sukses!",a.message),dataTableSumur.ajax.reload()):showMessage("error","Gagal!",a.message),afterLoadingButton(t)}).catch(e=>{console.log(e),afterLoadingButton(t)})}}),window.deleteSumur=((e,a)=>{a.preventDefault();var t=$(e).data("id");Swal.fire({title:"Hapus Sumur",text:"Anda yakin untuk menghapus Petak tersebut ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",showLoaderOnConfirm:!0,preConfirm:()=>deleteData("/Sumur/DeleteSumur/"+t).then(e=>{if(200!==e.status)throw new Error(e.statusText);return e}).catch(e=>{Swal.showValidationMessage(`Request failed: ${e}`)}),allowOutsideClick:()=>!Swal.isLoading()}).then(e=>{console.log(e),e.isConfirmed&&(200==e.value.data.code?(showMessage("success","Sukses!",e.value.data.message),dataTableSumur.ajax.reload()):showMessage("error","Failed",e.value.data.message))})}),window.editSumur=((e,a)=>{a.preventDefault();$(e).html();beforeLoadingButton($(e));var t=$(e).data("id");window.location.href="/Sumur/Edit/"+t});