"use strict";var dataTableWatershed,DataWatershed={init:function(){$(".parsley-validation").parsley(),$("#search-watershed-table").keyup(function(){dataTableWatershed.search($(this).val()).draw()}),$("#length-watershed-table").change(function(){dataTableWatershed.page.len($(this).val()).draw()}),(dataTableWatershed=$("#table-watershed").DataTable({processing:!0,serverSide:!0,dom:"tipr",order:[[2,"desc"]],ajax:{url:"/Watershed/GetdataTableWatershed",type:"POST",dataType:"JSON"},columns:[{data:null},{data:"riverAreaName",name:"RiverAreaName"},{data:"code",name:"Code"},{data:"name",name:"Name"},{data:"updatedAt",name:"UpdatedAt"},{render:function(e,a,t){return`<button type="button" class="btn btn-xs btn-success me-1 rounded-2" data-id="${t.id}" onclick="createEditWatershed(this, event)"><i class="mdi mdi-square-edit-outline me-1"></i>Edit</button>\n                            <button type="button" class="btn btn-xs btn-danger rounded-2" data-id="${t.id}" onclick="deleteWatershed(this, event)"><i class="mdi mdi-delete me-1"></i>Delete</button>`}}],columnDefs:[{targets:0,searchable:!1,orderable:!1,width:"9%",className:"text-center"},{targets:4,render:function(e){return null===e?"":moment(e).format("DD-MMM-YYYY")+' <small class="text-muted">'+moment(e).format("HH:mm")+"</small>"}},{targets:-1,searchable:!1,orderable:!1,width:"18%",className:"text-center"}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})).on("draw.dt",function(){var e=dataTableWatershed.page.info();dataTableWatershed.column(0,{search:"applied",order:"applied",page:"applied"}).nodes().each(function(a,t){a.innerHTML=t+1+e.start})})}};jQuery(document).ready(function(){DataWatershed.init()}),window.createEditWatershed=((e,a)=>{a.preventDefault();var t=$(e).html();beforeLoadingButton($(e));var d=$(e).data("id"),r=new FormData;r.append("Id",d),postData("/Watershed/CreateEditWatershed",r).then(a=>{let d=a.data;$("#modalCreateEditWatershed .modal-content").html(d),$("#modalCreateEditWatershed").modal("show"),afterLoadingButton($(e),t)})}),window.saveWatershed=((e,a)=>{a.preventDefault();var t=$(e).find("button[type=submit]");if($(e).parsley().validate(),$(e).parsley().isValid()){beforeLoadingButton(t);var d=new FormData;d.append("Id",getValueById("Id")),d.append("Name",getValueById("Name")),d.append("Code",getValueById("Code")),d.append("RiverAreaId",getValueById("RiverAreaId")),postData("/Watershed/SaveWatershed",d).then(e=>{let a=e.data;200==a.code?($("#modalCreateEditWatershed").modal("hide"),showMessage("success","Sukses!",a.message),dataTableWatershed.ajax.reload()):showMessage("error","Gagal!",a.message),afterLoadingButton(t)}).catch(e=>{console.log(e),afterLoadingButton(t)})}}),window.deleteWatershed=((e,a)=>{a.preventDefault();var t=$(e).data("id");Swal.fire({title:"Hapus DAS",text:"Anda yakin untuk menghapus DAS tersebut ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",showLoaderOnConfirm:!0,preConfirm:e=>deleteData("/Watershed/DeleteWatershed/"+t).then(e=>{if(200!==e.status)throw new Error(e.statusText);return e}).catch(e=>{Swal.showValidationMessage(`Request failed: ${e}`)}),allowOutsideClick:()=>!Swal.isLoading()}).then(e=>{console.log(e),e.isConfirmed&&(200==e.value.data.code?($("#modalCreateEditWatershed").modal("hide"),showMessage("success","Sukses!",e.value.data.message),dataTableWatershed.ajax.reload()):showMessage("error","Failed",e.value.data.message))})});